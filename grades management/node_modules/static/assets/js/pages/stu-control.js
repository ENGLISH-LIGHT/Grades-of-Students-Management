$(function () {
    // 欢迎
    $('#all-content').empty().append('<div class="welcome"> welcome </div>');

    // 点击个人信息导航栏
    $('#nav-my-info').click(function () {
        var $allContent = $('#all-content').empty();
        // 添加表单
        // var $clientSite = $('#all-context');
        var $formWrapper = $allContent.append('<div class="form-wrapper"></div>')
            .children('.form-wrapper');
        var $formTitle = $formWrapper.append('<div class="form-title">个人信息</div>')
            .children('.form-title');
        var $formBody = $formWrapper.append('<div class="form-body"></div>')
            .children('.form-body');
        // 往body中添加,一个一个的需要写入数据的 div
        var $teacherForm = $formBody.append('<form id="teacher-form" target="_self" action="student/detailInfo/insertInfo" method="POST">')
            .children('#teacher-form');
        $.get('student/detailInfo', function (data) {
            var d = data[0];
            $teacherForm.append(`<div class="form-li" id="form-li1"><label class="col-lg-2 col-md-2 col-sm-12 control-label">学&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp号:</label><div class="col-lg-10 col-md-10"><input readonly value='${d.Sno}' type="text" name="Sno" class="form-control" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li2" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">班&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp名:</label> <div class="col-lg-10 col-md-10"><input readonly value='${d.Cno}' name="Cno" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li4" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">性&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp别:</label> <div class="col-lg-10 col-md-10"><input readonly value='${d.Ssex}' name="Ssex" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li5" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">性&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp名:</label> <div class="col-lg-10 col-md-10"><input readonly value='${d.Sname}' name="Sname" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li3" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">身&nbsp&nbsp&nbsp份&nbsp&nbsp证:</label> <div class="col-lg-10 col-md-10"><input readonly value='${d.Sidenti}' name="Sidenti" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li6" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">年&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp龄:</label> <div class="col-lg-10 col-md-10"><input readonly value='${d.Sage}' name="Sage" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li7" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">绩&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp点:</label> <div class="col-lg-10 col-md-10"><input readonly value='${d.SGPA}' name="SGPA" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li8" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">学&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp分:</label> <div class="col-lg-10 col-md-10"><input readonly value='${d.ShaveScore}' name="ShaveScore" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li9" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">电&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp话:</label> <div class="col-lg-10 col-md-10"><input value='${d.Stel}' name="Stel" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li10" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">Q&nbsp&nbsp&nbsp&nbsp&nbsp&nbspQ:</label> <div class="col-lg-10 col-md-10"><input value='${d.SQQ}' name="SQQ" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li11" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">微&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp微:</label> <div class="col-lg-10 col-md-10"><input value='${d.Swechat}' name="Swechat" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li12" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">邮&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp箱:</label> <div class="col-lg-10 col-md-10"><input value='${d.Semail}' name="Semail" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class="form-li" id = "form-li13" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">家庭地址:</label> <div class="col-lg-10 col-md-10"><input value='${d.Saddr}' name="Saddr" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class= "form-li" id = "form-li14" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">籍&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp贯:</label> <div class="col-lg-10 col-md-10"><input value='${d.SnativePlace}' name="SnativePlace" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class= "form-li" id = "form-li15" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">父&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp亲:</label> <div class="col-lg-10 col-md-10"><input value='${d.SdadName}' name="SdadName" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class= "form-li" id = "form-li16" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">母&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp亲:</label> <div class="col-lg-10 col-md-10"><input value='${d.SmumName}' name="SmumName" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class= "form-li" id = "form-li17" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">父亲电话:</label> <div class="col-lg-10 col-md-10"><input value='${d.SdadTel}' name="SdadTel" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class= "form-li" id = "form-li18" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">母亲电话:</label> <div class="col-lg-10 col-md-10"><input value='${d.SmumTel}' name="SmumTel" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class= "form-li" id = "form-li18" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">自我评价:</label> <div class="col-lg-10 col-md-10"><input value='${d.Sremarks}' name="Sremarks" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)
                .append(`<div class= "form-li" id = "form-li20" > <label class="col-lg-2 col-md-2 col-sm-12 control-label">头像地址:</label> <div class="col-lg-10 col-md-10"><input value='${d.SheadImg}' name="SheadImg" type="text" class="form-control" placeholder="" autofocus="autofocus"></div></div>`)

            $teacherForm.append('<input type="submit" value="保  存" class="btn btn-success btn-block">')

        })

    })
    // 点击个人课表导航栏
    $('#nav-my-lesson').click(function(){
        var $allContent = $('#all-content').empty();
         //  添加小标题div 和 表主体div
        $allContent.empty().addClass('out-border')
            .append('<div id="main-title" class="panel-heading white-bg"></div>')
            .append('<div class="panel-body"></div>');
        var $titleDiv = $('#all-content>.panel-heading');
        var $bodyDiv = $('#all-content>.panel-body');
        // 给头div添加内容<h4>
        $titleDiv.empty().append('<h4 class="panel-title">学生课表</h4>')
        // 添加显示数据条数
        // $titleDiv.append('<div><div class="mydata_count"><label><span><select id="sel" size="1" name="datatable_length"><option value="3" selected="selected">3</option><option value="5">5</option><option value="10">10</option><option value="50">50</option></select></span>条数据</label></div><div><div id="datatable_filter"><label><input type="text" class="form-control input-large" placeholder="Search"></label></div></div></div>')

        //添加表格头部
        $bodyDiv.empty().append('<table class="table display" id="datatable1"></table>')
        var $table = $('.panel-body>.display');
        $.get('lesson/stu/lessonInfo',function(data){
            console.log(data);
            $table.append('<tbody></tbody>');
            var $body = $table.children('tbody');
            for (var i = 0; i < data.length; i++) {
                var strTds = '<td>' + data[i].Lno + '</td>'
                    + '<td>' + data[i].Lname + '</td>'
                    + '<td>' + data[i].Tname + '</td>'
                    + '<td>' + data[i].Lroom + '</td>'
                    + '<td>' + data[i].Lscore + '</td>';
                var newTr = document.createElement('tr');
                $(newTr).append(strTds).appendTo($body);
            }
            $table.empty()
            .append('<thead><tr><th>课程代号</th><th>课程名称</th><th>教师姓名</th><th>教室</th><th>学分</th></tr></thead>')
            .append($body)
            .append('<tfoot><tr><th>课程代号</th><th>课程名称</th><th>教师姓名</th><th>教室</th><th>学分</th></tr></tfoot>');
        });
    })

    // 点击个人成绩导航栏
    $('#nav-my-grade').click(function(){
        var $allContent = $('#all-content').empty();
         //  添加小标题div 和 表主体div
        $allContent.empty().addClass('out-border')
            .append('<div id="main-title" class="panel-heading white-bg for-GPA"></div>')
            .append('<div class="panel-body"></div>');
        var $titleDiv = $('#all-content>.panel-heading');
        var $bodyDiv = $('#all-content>.panel-body');
        // 给头div添加内容<h4>
        $titleDiv.empty().append('<h4 class="panel-title">成绩</h4>')
        // 添加显示数据条数
        // $titleDiv.append('<div><div class="mydata_count"><label><span><select id="sel" size="1" name="datatable_length"><option value="3" selected="selected">3</option><option value="5">5</option><option value="10">10</option><option value="50">50</option></select></span>条数据</label></div><div><div id="datatable_filter"><label><input type="text" class="form-control input-large" placeholder="Search"></label></div></div></div>')

        //添加表格头部
        $bodyDiv.empty().append('<table class="table display" id="datatable1"></table>')
        var $table = $('.panel-body>.display');
        $.get('grade/stu/gradeInfo',function(data){
            console.log(data);
            $table.append('<tbody></tbody>');
            var $body = $table.children('tbody');
            var allLscore = 0, allGPAScore = 0,tmp;
            for (var i = 0; i < data.length; i++) {
                tmp = ((data[i].Gscore - 50) * data[i].Lscore / 10);
                allGPAScore += tmp;
                var strTds = '<td>' + data[i].Lno + '</td>'
                    + '<td>' + data[i].Lname + '</td>'
                    + '<td>' + data[i].Gscore + '</td>'
                    + '<td>' + data[i].Lscore + '</td>'
                + '<td>' + tmp + '</td>';
                var newTr = document.createElement('tr');
                $(newTr).append(strTds).appendTo($body);
                allLscore +=  data[i].Lscore;
            }
            var GPA = allGPAScore / allLscore;
            $titleDiv.after('<div class="GPA">'+'GPA:'+`${GPA}`+'</div>');
            $table.empty()
            .append('<thead><tr><th>课程代号</th><th>课程名称</th><th>分数</th><th>学分</th><th>绩点分</th></tr></thead>')
            .append($body)
            .append('<tfoot><tr><th>课程代号</th><th>课程名称</th><th>分数</th><th>学分</th><th>绩点分</th></tr></tfoot>');
        });
    })
    // 点击个人成绩导航栏
    $('#nav-my-account').click(function(){
        var $allContent = $('#all-content').empty();
          // 清除客户区内容
          $allContent.empty().removeClass('out-border');
          // var $clientSite = $('#all-context');
          var $formWrapper = $allContent.append('<div class="form-wrapper account"></div>')
              .children('.form-wrapper');
          var $formTitle = $formWrapper.append('<div class="form-title">账号&密码</div>')
              .children('.form-title');
          var $formBody = $formWrapper.append('<div class="form-body"></div>')
              .children('.form-body');
          // 往body中添加,一个一个的需要写入数据的 div
          var $teacherForm = $formBody.append('<form id="teacher-form" target="_self" action="Suser/stu/updateAccountInfo" method="POST">')
            .children('#teacher-form');
        $.get('Suser/stu/getAccountInfo',{ID:1}, function (d) {
            for (var i = 0; i < d.length; i++) {

                $teacherForm.append(`<div class="form-li" id="form-li5"><label class="col-lg-2 col-md-2 col-sm-12 control-label">ID</label><div class="col-lg-10 col-md-10"><input readOnly value='${d[i].ID}' name="ID" type="text" class="form-control" placeholder="ID" autofocus="autofocus"></div></div>`)
                    .append(`<div class="form-li" id="form-li1"><label class="col-lg-2 col-md-2 col-sm-12 control-label">用户名</label><div class="col-lg-10 col-md-10"><input value='${d[i].Suser}' type="text" name="Suser" class="form-control" placeholder="字符长度 < 10且不含有中文" autofocus="autofocus"></div></div>`)
                    .append(`<div class="form-li" id="form-li2"><label class="col-lg-2 col-md-2 col-sm-12 control-label">邮&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp箱</label><div class="col-lg-10 col-md-10"><input value='${d[i].Semail}' name="Semail" type="text" class="form-control" placeholder="输入邮箱" autofocus="autofocus"></div></div>`)
                    .append(`<div class="form-li" id="form-li2"><label class="col-lg-2 col-md-2 col-sm-12 control-label">邮&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp箱</label><div class="col-lg-10 col-md-10"><input value='${d[i].STel}' name="STel" type="text" class="form-control" placeholder="输入合法电话号码" autofocus="autofocus"></div></div>`)                    
                    .append(`<div class="form-li" id="form-li3"><label class="col-lg-2 col-md-2 col-sm-12 control-label">重置密码</label><div class="col-lg-10 col-md-10"><input  name="SfirstPass" type="password" class="form-control" placeholder="请输入新密码" autofocus="autofocus"></div></div>`)
                    .append(`<div class="form-li" id="form-li4"><label class="col-lg-2 col-md-2 col-sm-12 control-label">确认密码</label><div class="col-lg-10 col-md-10"><input name="SsecondPass" type="password" class="form-control" placeholder="请再次输入密码" autofocus="autofocus"></div></div>`)
                $teacherForm.append('<input type="submit" value="修  改" class="btn btn-success btn-block">')
            }
        })
        if($('#form-li3').attr('value') !== $('#form-li4').attr('value')){
            $('#form-li4').attr('value',"");
        }
       
    })

})